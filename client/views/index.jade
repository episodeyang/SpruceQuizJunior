!!! 5
html(lang='en', data-ng-app='SpruceQuizApp')
    head
        meta(charset='utf-8')
        title 云杉习题-新一代学习管理平台
        script(src="/js/angular/angular.js")
        //-script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular.js")
        //-script(src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.4.0.js")
        //-script(src="/js/angular-ui/ui-bootstrap-tpls-0.4.0.min.js")
        script(src="/js/angular-ui.min.js")
        //-link(href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css",
            rel="stylesheet")
        link(href='/css/bootstrap-combined.no-icons.min.SpruceLearning.css',
            rel="stylesheet")
        //-link(href='/css/bootstrap.min.css', rel="stylesheet")
        link(rel='stylesheet', href='/css/app.css')
        link(href="//netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.min.css", rel="stylesheet")
        //-script.
            'use strict';(function(i){function d(c,a,e){return c[a]||(c[a]=e())}return d(d(i,"angular",Object),"module",function(){var c={};return function(a,e,f){e&&c.hasOwnProperty(a)&&(c[a]=null);return d(c,a,function(){function b(a,b,d){return function(){c[d||"push"]([a,b,arguments]);return g}}if(!e)throw Error("No module: "+a);var c=[],d=[],h=b("$injector","invoke"),g={_invokeQueue:c,_runBlocks:d,requires:e,name:a,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),
            value:b("$provide","value"),constant:b("$provide","constant","unshift"),filter:b("$filterProvider","register"),directive:b("$compileProvider","directive"),config:h,run:function(a){d.push(a);return this}};f&&h(f);return g})}})})(window);
            !function(a,b,c){function t(a,c){var e=b.createElement("script"),f=j;e.onload=e.onerror=e[o]=function(){e[m]&&!/^c|loade/.test(e[m])||f||(e.onload=e[o]=null,f=1,c())},e.async=1,e.src=a,d.insertBefore(e,d.firstChild)}function q(a,b){p(a,function(a){return!b(a)})}var d=b.getElementsByTagName("head")[0],e={},f={},g={},h={},i="string",j=!1,k="push",l="DOMContentLoaded",m="readyState",n="addEventListener",o="onreadystatechange",p=function(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return j;return 1};!b[m]&&b[n]&&(b[n](l,function r(){b.removeEventListener(l,r,j),b[m]="complete"},j),b[m]="loading");var s=function(a,b,d){function o(){if(!--m){e[l]=1,j&&j();for(var a in g)p(a.split("|"),n)&&!q(g[a],n)&&(g[a]=[])}}function n(a){return a.call?a():e[a]}a=a[k]?a:[a];var i=b&&b.call,j=i?b:d,l=i?a.join(""):b,m=a.length;c(function(){q(a,function(a){h[a]?(l&&(f[l]=1),o()):(h[a]=1,l&&(f[l]=1),t(s.path?s.path+a+".js":a,o))})},0);return s};s.get=t,s.ready=function(a,b,c){a=a[k]?a:[a];var d=[];!q(a,function(a){e[a]||d[k](a)})&&p(a,function(a){return e[a]})?b():!function(a){g[a]=g[a]||[],g[a][k](b),c&&c(d)}(a.join("|"));return s};var u=a.$script;s.noConflict=function(){a.$script=u;return this},typeof module!="undefined"&&module.exports?module.exports=s:a.$script=s}(this,document,setTimeout)
            // load all of the dependencies asynchronously.
            $script([
            '/js/angular/angular.js',
            '/js/angular-ui/ui-bootstrap-tpls-0.4.0.min.js',
            'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js',
            'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&delayStartupUntil=configured&dummy=.js',
            'https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular-cookies.js',
            'https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular-resource.js',
            '/js/app.js',
            '/js/routingConfig.js',
            '/js/services.js',
            '/js/controllers.js',
            '/js/controllers/problems.js',
            '/js/controllers/reports.js',
            '/js/filters.js',
            '/js/directives.js'
            ], function() {
            angular.bootstrap(document, ['myApp']);
            });

        // This is needed because Facebook login redirects add #_=_ at the end of the URL

        script(type="text/javascript").
                if (window.location.href.indexOf('#_=_') > 0) {
                    window.location = window.location.href.replace(/#.*/, '');
                }
    body(data-ng-controller="AppCtrl", data-ng-cloak)
        #cover(data-ng-hide="appInitialized", data-ng-animate="{ hide: 'fade-hide' }")
        div.sp-container
            .navbar
                .navbar-inner
                    ul.nav
                        li(data-access-level='{{ accessLevels.anon }}', active-nav)
                            a(href='/login') 云杉习题
                        li(data-access-level='{{ accessLevels.anon }}', active-nav)
                            a(href='/register') 用户注册
                        li(data-access-level='{{ accessLevels.loggedin }}', active-nav)
                            a(href='/') 首页
                        //-li(data-access-level='{{ accessLevels.loggedin }}', active-nav)
                            a(href='/private') Private
                        //-li(data-access-level='{{ accessLevels.superuser }}', active-nav)
                            a(href='/admin') Admin
                        li(data-access-level='{{ accessLevels.superuser }}', active-nav)
                            a(href='/sections') 课程
                        li(data-access-level='{{ accessLevels.superuser }}', active-nav)
                            a(href='/admin') 学生管理
                        li(data-access-level='{{ accessLevels.superuser }}', active-nav).dropdown
                            a.dropdown-toggle 问题
                                span.caret
                            ul.dropdown-menu
                                li
                                    a(href='/problems') 编辑问题
                        li(data-access-level='{{ accessLevels.superuser }}', active-nav)
                            a(href='/reports') 成绩和报告
                        //-li(data-access-level='{{ accessLevels.loggedin }}')
                            a(href="", data-ng-click="logout()")
                                | Log out
                    div
                        p
                    div.pull-right.dropdown(data-access-level='{{accessLevels.loggedin}}')
                        a.dropdown-toggle {{ user.username }}
                            span.caret
                        ul.dropdown-menu
                            li
                                a(href="", data-ng-click="logout()")
                                    | 登出
            div.sp-body
                .container-fluid
                    div(data-ng-view='ng-view')
            div.footer
                .container.text-center(style="padding-top: 30px")
                    p &copy;
                        a(href="http://www.sprucelearning.com") 杉景教育科技
                        | &nbsp; 2013
            //-script(src='/js/widgets.js')
        script(src='http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js')
        script(src='/js/lib/angular-underscore.js')
        //-this is just an adapter, not the lib itself.
        script(src='http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&delayStartupUntil=configured&dummy=.js')
        script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular-cookies.js')
        script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular-resource.js")
        script(src='/js/routingConfig.js')
        script(src='/js/app.js')
        script(src='/js/services.js')
        script(src='/js/controllers.js')
        script(src='/js/controllers/problems.js')
        script(src='/js/controllers/reports.js')
        script(src='/js/controllers/sections.js')
        script(src='/js/controllers/admin.js')
        script(src='/js/filters.js')
        script(src='/js/directives.js')
